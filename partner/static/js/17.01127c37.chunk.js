(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{160:function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"g",function(){return i}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return p});var r=n(68),a=n(17),l=n(15),o=n.n(l),c=function(e,t,n){return function(l){return o.a.post(a.p,{token:e,order_id:t,store_id:n}).then(function(e){var t=e.data;return l({type:r.a,payload:t})}).catch(function(e){console.log(e)})}},i=function(){return function(e){return e({type:r.a,payload:null})}},u=function(e,t,n){return function(l){return o.a.post(a.b,{token:e,order_id:t,store_id:n}).then(function(e){var t=e.data;return l({type:r.a,payload:t})}).catch(function(e){console.log(e)})}},d=function(e,t,n){return function(l){return o.a.post(a.a,{token:e,order_id:t,store_id:n}).then(function(e){var t=e.data;return l({type:r.a,payload:t})}).catch(function(e){console.log(e)})}},m=function(e,t,n){return function(l){return o.a.post(a.v,{token:e,order_id:t,store_id:n}).then(function(e){var t=e.data;return l({type:r.a,payload:t})}).catch(function(e){console.log(e)})}},s=function(e,t,n){return function(l){return o.a.post(a.u,{token:e,order_id:t,store_id:n}).then(function(e){var t=e.data;return l({type:r.a,payload:t})}).catch(function(e){console.log(e)})}},p=function(e,t,n){return function(l){return o.a.post(a.c,{token:e,order_id:t,store_id:n}).then(function(e){var t=e.data;return l({type:r.a,payload:t})}).catch(function(e){console.log(e)})}}},231:function(e,t,n){"use strict";n.r(t);var r=n(22),a=n(23),l=n(25),o=n(24),c=n(26),i=n(0),u=n.n(i),d=n(148),m=n.n(d),s=n(34),p=n(160),g=n(199),_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!0,cssLinkElements:[]},n.getAddonsNames=function(e){if(e.order_item_addons.length>0){var t="";return e.order_item_addons.forEach(function(e){t+=e.addon_name+", "}),t=t.replace(/,\s*$/,""),u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null)," (",t,")")}return null},n.getOrderItemTotalPrice=function(e){var t=parseFloat(e.price)*parseInt(e.quantity),n=0;return e.order_item_addons.length>0&&e.order_item_addons.forEach(function(e){n=parseFloat(n)+parseFloat(e.addon_price)}),parseFloat(t)+parseFloat(n)},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){for(var e=this,t=document.querySelectorAll("link[rel=stylesheet]"),n=[],r=0;r<t.length;r++)n.push(t[r].outerHTML),t[r].parentNode.removeChild(t[r]);this.setState({cssLinkElements:n});var a=this.props.match.params.order_id,l=this.props.user;l.success&&this.props.getSingleOrder(l.data.auth_token,a,localStorage.getItem("selected_store_id")).then(function(t){t&&t.payload&&t.payload.id&&(e.setState({loading:!1}),setTimeout(function(){"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&(console.log("webprint print command sent"),window.Android.printFromAndroid("webprint",null))},250))})}},{key:"componentWillUnmount",value:function(){this.props.removeSingleOrderFromState(),this.state.cssLinkElements.forEach(function(e){document.getElementsByTagName("head")[0].innerHTML+=e})}},{key:"render",value:function(){var e=this,t=this.props.single_order;return u.a.createElement(u.a.Fragment,null,u.a.createElement(g.Helmet,null,u.a.createElement("style",{type:"text/css"},"\n                        html,body{margin:0;padding:0;font-size:8.5px}\n                        body{padding:8px;font-family:monospace;white-space:pre-wrap}\n                        @media print {\n                            body{font-size:8.5px}\n                        }\n\t\t\t\t\t\t.hidden {display: none}\n                    ")),!this.state.loading&&u.a.createElement("div",{className:"mainPrintBlock"},u.a.createElement("center",null,u.a.createElement("h1",null,u.a.createElement("strong",null,localStorage.getItem("storeName")),u.a.createElement("br",null)),u.a.createElement("hr",null)),u.a.createElement("center",null,"true"===localStorage.getItem("printer_show_store_name")&&u.a.createElement("h3",null,u.a.createElement("u",null,t.restaurant.name)),"true"===localStorage.getItem("printer_show_order_id")&&u.a.createElement("p",null,t.unique_order_id),u.a.createElement("p",null,u.a.createElement(m.a,{format:"DD/MM/YYYY hh:mma"},t.created_at)),"true"===localStorage.getItem("printer_show_delivery_type")&&u.a.createElement(u.a.Fragment,null,1===t.delivery_type?u.a.createElement("b",null,u.a.createElement("u",null,"(",localStorage.getItem("printer_delivery_order_label"),")")):u.a.createElement("b",null,u.a.createElement("u",null,"(",localStorage.getItem("printer_selfpickup_order_label"),")"))),u.a.createElement("hr",null)),u.a.createElement("center",null,u.a.createElement("h3",null,u.a.createElement("u",null,localStorage.getItem("printer_customer_details_label"))),"true"===localStorage.getItem("printer_show_customer_name")&&u.a.createElement("p",null,t.user.name),"true"===localStorage.getItem("printer_show_customer_phone")&&u.a.createElement("p",null,t.user.phone),"true"===localStorage.getItem("printer_show_delivery_address")&&1===t.delivery_type&&u.a.createElement("span",null,t.address)),u.a.createElement("center",null,u.a.createElement("table",{style:{width:"100%"}},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{style:{width:"30px",textAlign:"left"}},localStorage.getItem("printer_qty_label")),u.a.createElement("th",{style:{width:"90px",textAlign:"left"}},localStorage.getItem("printer_item_label")),u.a.createElement("th",{style:{width:"70px",textAlign:"right"}},localStorage.getItem("printer_total_label")))),u.a.createElement("tbody",null,t.orderitems.map(function(t){return u.a.createElement("tr",{key:t.id},u.a.createElement("td",{style:{textAlign:"left"}},t.quantity),u.a.createElement("td",{style:{textAlign:"left"}},t.name," ",e.getAddonsNames(t)),u.a.createElement("td",{style:{textAlign:"right"}},e.getOrderItemTotalPrice(t)))})))),u.a.createElement("br",null),u.a.createElement("center",null,u.a.createElement("table",{style:{width:"100%"}},u.a.createElement("tbody",null,null!==t.coupon_name&&u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("b",null,localStorage.getItem("printer_coupon_label"),": ")),u.a.createElement("td",{style:{textAlign:"right"}},t.coupon_name)),null!==t.restaurant_charge&&u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("b",null,localStorage.getItem("printer_store_charge_label"),": ")),u.a.createElement("td",{style:{textAlign:"right"}},t.restaurant_charge)),null!==t.delivery_charge&&u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("b",null,localStorage.getItem("printer_delivery_charges_label"),": ")),u.a.createElement("td",{style:{textAlign:"right"}},t.delivery_charge)),null!==t.tax&&u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("b",null,localStorage.getItem("printer_tax_label"),": ")),u.a.createElement("td",{style:{textAlign:"right"}},t.tax)),u.a.createElement("tr",{style:{borderTop:"1px solid #000",paddingTop:"5px"}},u.a.createElement("td",null,u.a.createElement("h4",{style:{fontWeight:"900"}},localStorage.getItem("printer_total_label"),":"," ")),u.a.createElement("td",{style:{textAlign:"right"}},u.a.createElement("h4",{style:{fontWeight:"900"}},t.total)))))),u.a.createElement("div",{className:"clearfix"}),u.a.createElement("center",null,u.a.createElement("h4",{style:{fontWeight:"700",clear:"both"}},localStorage.getItem("printer_custom_footer_title_label"))),u.a.createElement("p",null,localStorage.getItem("printer_custom_footer_subtitle_label"))))}}]),t}(i.Component);t.default=Object(s.b)(function(e){return{user:e.user.user,single_order:e.single_order.single_order}},{getSingleOrder:p.d,removeSingleOrderFromState:p.g})(_)}}]);