<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/assets/favicons/favicon.ico" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#FF6B35" />
    <meta
      name="description"
      content="Restaurant Partner App - Manage your restaurant business with ease"
    />
    <link rel="apple-touch-icon" href="/assets/favicons/favicon-192.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/assets/css/main.css?v=1646204798" />
    <link rel="stylesheet" href="/assets/css/storeapp.css?v=1646204798" />
    <link rel="stylesheet" href="/assets/css/custom.css?v=1646204798" />
    <title>Restaurant Partner Login - Manage Your Business</title>
  </head>
  <body class="bg-store-light">
    <!-- Modern Login Overlay -->
    <div id="modernLoginOverlay" class="login-container">
      <div class="modern-login-card">
        <!-- Restaurant Illustration Side -->
        <div class="login-illustration">
          <div class="floating-elements">
            <div class="floating-element">üçï</div>
            <div class="floating-element">üçî</div>
            <div class="floating-element">ü•ó</div>
            <div class="floating-element">üçú</div>
          </div>

          <div class="restaurant-icon">
            <i class="fas fa-utensils"></i>
          </div>

          <div class="welcome-text">
            <h2>Welcome Back!</h2>
            <p>
              Access your restaurant dashboard and manage your business
              effortlessly
            </p>
          </div>
        </div>

        <!-- Login Form Side -->
        <div class="login-form-container">
          <div class="login-header">
            <h1>Restaurant Partner Login</h1>
            <p>Sign in to access your restaurant dashboard</p>
          </div>

          <!-- Error/Success Messages -->
          <div id="errorMessage" class="error-message" style="display: none">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Invalid credentials. Please try again.</span>
          </div>

          <div
            id="successMessage"
            class="success-message"
            style="display: none"
          >
            <i class="fas fa-check-circle"></i>
            <span>Login successful! Redirecting...</span>
          </div>

          <!-- Login Form -->
          <form id="modernLoginForm" class="modern-login-form">
            <!-- Phone/Email Input -->
            <div class="modern-form-group">
              <label for="loginIdentifier" class="modern-label">
                <i class="fas fa-user"></i> Phone Number or Email
              </label>
              <div class="modern-input-wrapper">
                <input
                  type="text"
                  id="loginIdentifier"
                  name="loginIdentifier"
                  class="modern-input auth-input"
                  placeholder="Enter your phone number or email address"
                  required
                  autocomplete="username"
                />
                <i class="input-icon fas fa-mobile-alt"></i>
              </div>
            </div>

            <!-- Password Input -->
            <div class="modern-form-group">
              <label for="loginPassword" class="modern-label">
                <i class="fas fa-lock"></i> Password
              </label>
              <div class="modern-input-wrapper">
                <input
                  type="password"
                  id="loginPassword"
                  name="loginPassword"
                  class="modern-input auth-input"
                  placeholder="Enter your secure password"
                  required
                  autocomplete="current-password"
                />
                <i class="input-icon fas fa-lock"></i>
              </div>
            </div>

            <!-- Remember Me & Forgot Password -->
            <div
              class="form-options"
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 24px;
              "
            >
              <label
                style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  cursor: pointer;
                "
              >
                <input
                  type="checkbox"
                  id="rememberMe"
                  style="accent-color: var(--primary-color)"
                />
                <span style="font-size: 0.9rem; color: var(--text-secondary)"
                  >Remember me</span
                >
              </label>
              <a
                href="#"
                style="
                  font-size: 0.9rem;
                  color: var(--primary-color);
                  text-decoration: none;
                "
              >
                Forgot password?
              </a>
            </div>

            <!-- Login Button -->
            <button type="submit" class="modern-btn-primary" id="loginBtn">
              <span id="loginBtnText">Sign In to Restaurant Portal</span>
              <div
                id="loginBtnSpinner"
                class="loading-spinner"
                style="display: none"
              ></div>
            </button>
          </form>

          <!-- Social Login Divider -->
          <div class="divider">
            <span>Or continue with</span>
          </div>

          <!-- Google Login Button -->
          <button type="button" class="google-login-button">
            <i class="fab fa-google"></i>
            <span>Continue with Google</span>
          </button>

          <!-- Footer Links -->
          <div class="login-footer">
            <p style="margin-bottom: 12px; color: var(--text-secondary)">
              Don't have a restaurant account?
            </p>
            <a href="#" style="font-weight: 600">
              <i class="fas fa-store"></i> Register Your Restaurant
            </a>
            <div class="footer-links">
              <a href="#">Privacy Policy</a>
              <span>‚Ä¢</span>
              <a href="#">Terms of Service</a>
              <span>‚Ä¢</span>
              <a href="#">Support</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="root"></div>
    <script>
      !(function (d) {
        function e(e) {
          for (
            var t, r, n = e[0], o = e[1], c = e[2], a = 0, f = [];
            a < n.length;
            a++
          )
            ((r = n[a]), l[r] && f.push(l[r][0]), (l[r] = 0));
          for (t in o)
            Object.prototype.hasOwnProperty.call(o, t) && (d[t] = o[t]);
          for (p && p(e); f.length; ) f.shift()();
          return (i.push.apply(i, c || []), u());
        }
        function u() {
          for (var e, t = 0; t < i.length; t++) {
            for (var r = i[t], n = !0, o = 1; o < r.length; o++) {
              var c = r[o];
              0 !== l[c] && (n = !1);
            }
            n && (i.splice(t--, 1), (e = s((s.s = r[0]))));
          }
          return e;
        }
        var r = {},
          f = { 26: 0 },
          l = { 26: 0 },
          i = [];
        function s(e) {
          if (r[e]) return r[e].exports;
          var t = (r[e] = { i: e, l: !1, exports: {} });
          return (d[e].call(t.exports, t, t.exports, s), (t.l = !0), t.exports);
        }
        ((s.e = function (i) {
          var e = [];
          f[i]
            ? e.push(f[i])
            : 0 !== f[i] &&
              { 7: 1 }[i] &&
              e.push(
                (f[i] = new Promise(function (e, n) {
                  for (
                    var t =
                        "static/css/" +
                        ({}[i] || i) +
                        "." +
                        {
                          0: "31d6cfe0",
                          1: "31d6cfe0",
                          2: "31d6cfe0",
                          3: "31d6cfe0",
                          4: "31d6cfe0",
                          6: "31d6cfe0",
                          7: "5cdea8d1",
                          8: "31d6cfe0",
                          9: "31d6cfe0",
                          10: "31d6cfe0",
                          11: "31d6cfe0",
                          12: "31d6cfe0",
                          13: "31d6cfe0",
                          14: "31d6cfe0",
                          15: "31d6cfe0",
                          16: "31d6cfe0",
                          17: "31d6cfe0",
                          18: "31d6cfe0",
                          19: "31d6cfe0",
                          21: "31d6cfe0",
                          22: "31d6cfe0",
                          23: "31d6cfe0",
                          24: "31d6cfe0",
                          25: "31d6cfe0",
                        }[i] +
                        ".chunk.css",
                      o = s.p + t,
                      r = document.getElementsByTagName("link"),
                      c = 0;
                    c < r.length;
                    c++
                  ) {
                    var a =
                      (d = r[c]).getAttribute("data-href") ||
                      d.getAttribute("href");
                    if ("stylesheet" === d.rel && (a === t || a === o))
                      return e();
                  }
                  var f = document.getElementsByTagName("style");
                  for (c = 0; c < f.length; c++) {
                    var d;
                    if (
                      (a = (d = f[c]).getAttribute("data-href")) === t ||
                      a === o
                    )
                      return e();
                  }
                  var u = document.createElement("link");
                  ((u.rel = "stylesheet"),
                    (u.type = "text/css"),
                    (u.onload = e),
                    (u.onerror = function (e) {
                      var t = (e && e.target && e.target.src) || o,
                        r = new Error(
                          "Loading CSS chunk " + i + " failed.\n(" + t + ")",
                        );
                      ((r.request = t), n(r));
                    }),
                    (u.href = o),
                    document.getElementsByTagName("head")[0].appendChild(u));
                }).then(function () {
                  f[i] = 0;
                })),
              );
          var r = l[i];
          if (0 !== r)
            if (r) e.push(r[2]);
            else {
              var t = new Promise(function (e, t) {
                r = l[i] = [e, t];
              });
              e.push((r[2] = t));
              var n,
                o = document.getElementsByTagName("head")[0],
                c = document.createElement("script");
              ((c.charset = "utf-8"),
                (c.timeout = 120),
                s.nc && c.setAttribute("nonce", s.nc),
                (c.src =
                  s.p +
                  "static/js/" +
                  ({}[i] || i) +
                  "." +
                  {
                    0: "18422be2",
                    1: "da4c2665",
                    2: "08ac03af",
                    3: "fdfb4fce",
                    4: "32865e04",
                    6: "45bed1a3",
                    7: "81b70d44",
                    8: "ef0b26eb",
                    9: "87ca321f",
                    10: "6bd60780",
                    11: "e36f2dd7",
                    12: "73a03716",
                    13: "a217e5f8",
                    14: "a4ced366",
                    15: "8fc470ee",
                    16: "c357334c",
                    17: "01127c37",
                    18: "f64a4ed0",
                    19: "77c1ae83",
                    21: "32b6ea3e",
                    22: "55e262f3",
                    23: "8154bc79",
                    24: "44b0ad87",
                    25: "570e4dfd",
                  }[i] +
                  ".chunk.js"),
                (n = function (e) {
                  ((c.onerror = c.onload = null), clearTimeout(a));
                  var t = l[i];
                  if (0 !== t) {
                    if (t) {
                      var r = e && ("load" === e.type ? "missing" : e.type),
                        n = e && e.target && e.target.src,
                        o = new Error(
                          "Loading chunk " +
                            i +
                            " failed.\n(" +
                            r +
                            ": " +
                            n +
                            ")",
                        );
                      ((o.type = r), (o.request = n), t[1](o));
                    }
                    l[i] = void 0;
                  }
                }));
              var a = setTimeout(function () {
                n({ type: "timeout", target: c });
              }, 12e4);
              ((c.onerror = c.onload = n), o.appendChild(c));
            }
          return Promise.all(e);
        }),
          (s.m = d),
          (s.c = r),
          (s.d = function (e, t, r) {
            s.o(e, t) ||
              Object.defineProperty(e, t, { enumerable: !0, get: r });
          }),
          (s.r = function (e) {
            ("undefined" != typeof Symbol &&
              Symbol.toStringTag &&
              Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
              Object.defineProperty(e, "__esModule", { value: !0 }));
          }),
          (s.t = function (t, e) {
            if ((1 & e && (t = s(t)), 8 & e)) return t;
            if (4 & e && "object" == typeof t && t && t.__esModule) return t;
            var r = Object.create(null);
            if (
              (s.r(r),
              Object.defineProperty(r, "default", { enumerable: !0, value: t }),
              2 & e && "string" != typeof t)
            )
              for (var n in t)
                s.d(
                  r,
                  n,
                  function (e) {
                    return t[e];
                  }.bind(null, n),
                );
            return r;
          }),
          (s.n = function (e) {
            var t =
              e && e.__esModule
                ? function () {
                    return e.default;
                  }
                : function () {
                    return e;
                  };
            return (s.d(t, "a", t), t);
          }),
          (s.o = function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
          }),
          (s.p = "/"),
          (s.oe = function (e) {
            throw (console.error(e), e);
          }));
        var t = (window.webpackJsonp = window.webpackJsonp || []),
          n = t.push.bind(t);
        ((t.push = e), (t = t.slice()));
        for (var o = 0; o < t.length; o++) e(t[o]);
        var p = n;
        u();
      })([]);
    </script>
    <script src="/static/js/20.aee315ef.chunk.js"></script>
    <script src="/static/js/main.138e493e.chunk.js"></script>

    <!-- Modern Login Enhancement Script -->
    <script>
      // Modern Login Enhancement Script
      document.addEventListener("DOMContentLoaded", function () {
        // Check if modern login elements exist
        const modernLoginOverlay =
          document.getElementById("modernLoginOverlay");
        const root = document.getElementById("root");

        if (modernLoginOverlay) {
          // Check if user is already authenticated
          const isAuthenticated =
            localStorage.getItem("token") ||
            localStorage.getItem("auth_token") ||
            sessionStorage.getItem("token");

          if (isAuthenticated) {
            // User is already logged in, show the original app
            modernLoginOverlay.style.display = "none";
            root.style.display = "block";
            return;
          }

          // Show modern login for unauthenticated users
          modernLoginOverlay.style.display = "flex";
          root.style.display = "none";

          // Form submission handler
          const loginForm = document.getElementById("modernLoginForm");
          const loginBtn = document.getElementById("loginBtn");
          const loginBtnText = document.getElementById("loginBtnText");
          const loginBtnSpinner = document.getElementById("loginBtnSpinner");
          const errorMessage = document.getElementById("errorMessage");
          const successMessage = document.getElementById("successMessage");

          if (loginForm) {
            loginForm.addEventListener("submit", function (e) {
              e.preventDefault();

              // Show loading state
              loginBtn.disabled = true;
              loginBtnText.style.display = "none";
              loginBtnSpinner.style.display = "inline-block";
              errorMessage.style.display = "none";
              successMessage.style.display = "none";

              // Get form data
              const formData = new FormData(loginForm);
              const loginData = {
                identifier: formData.get("loginIdentifier"),
                password: formData.get("loginPassword"),
                remember: formData.get("rememberMe") === "on",
              };

              // Try to authenticate with the server
              authenticateUser(loginData)
                .then((response) => {
                  // Reset button state
                  loginBtn.disabled = false;
                  loginBtnText.style.display = "inline";
                  loginBtnSpinner.style.display = "none";

                  if (response.success) {
                    // Store authentication token if provided
                    if (response.token) {
                      localStorage.setItem("token", response.token);
                    }
                    if (response.auth_token) {
                      localStorage.setItem("auth_token", response.auth_token);
                    }

                    // Show success message
                    successMessage.style.display = "flex";

                    setTimeout(() => {
                      // Hide modern login and show original React app
                      modernLoginOverlay.style.display = "none";
                      root.style.display = "block";

                      // Reload the page to ensure React app loads with authentication
                      window.location.reload();
                    }, 1000);
                  } else {
                    // Show error message
                    errorMessage.querySelector("span").textContent =
                      response.message ||
                      "Invalid credentials. Please try again.";
                    errorMessage.style.display = "flex";
                  }
                })
                .catch((error) => {
                  console.error("Authentication failed:", error);
                  // Reset button state
                  loginBtn.disabled = false;
                  loginBtnText.style.display = "inline";
                  loginBtnSpinner.style.display = "none";

                  // Show error message
                  errorMessage.querySelector("span").textContent =
                    "Network error. Please check your connection and try again.";
                  errorMessage.style.display = "flex";
                });
            });
          }

          // Google login handler
          const googleBtn = document.querySelector(".google-login-button");

          if (googleBtn) {
            googleBtn.addEventListener("click", function () {
              console.log("Google login clicked");
              this.innerHTML =
                '<i class="fab fa-google"></i> <span>Connecting...</span>';
              this.disabled = true;

              setTimeout(() => {
                // For demo purposes, show success and redirect to original app
                successMessage.style.display = "flex";

                setTimeout(() => {
                  // Hide modern login and show original React app
                  modernLoginOverlay.style.display = "none";
                  root.style.display = "block";

                  // Trigger React app initialization if needed
                  if (window.initializeReactApp) {
                    window.initializeReactApp();
                  }
                }, 1500);
              }, 2000);
            });
          }

          // Enhanced input focus effects
          const inputs = document.querySelectorAll(".modern-input");
          inputs.forEach((input) => {
            input.addEventListener("focus", function () {
              this.parentElement.style.transform = "translateY(-1px)";
            });

            input.addEventListener("blur", function () {
              this.parentElement.style.transform = "translateY(0)";
            });

            // Real-time validation
            input.addEventListener("input", function () {
              if (this.value.length > 0) {
                this.style.borderColor = "var(--success-color)";
              } else {
                this.style.borderColor = "var(--border-color)";
              }
            });
          });
        }

        // Fallback to original React app
        window.showOriginalApp = function () {
          if (modernLoginOverlay) modernLoginOverlay.style.display = "none";
          if (root) root.style.display = "block";
        };
      });
    </script>
  </body>
</html>
